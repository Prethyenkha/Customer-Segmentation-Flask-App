<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Customer Segmentation</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h2>Predict Customer Segment</h2>
  <form id="predictForm">
    <input type="number" id="Frequency" placeholder="Frequency" required><br>
    <input type="number" id="TotalQuantity" placeholder="Total Quantity" required><br>
    <input type="number" id="Variety" placeholder="Variety" required><br>
    <input type="number" id="TotalSpending" placeholder="Total Spending" required><br>
    <input type="number" id="Recency" placeholder="Recency (days)" required><br>
    <button type="submit">Predict Segment</button>
  </form>

  <h3 id="result"></h3>

  <script>
    document.getElementById('predictForm').addEventListener('submit', async function (e) {
      e.preventDefault();
      
      const data = {
        Frequency: parseFloat(document.getElementById('Frequency').value),
        TotalQuantity: parseFloat(document.getElementById('TotalQuantity').value),
        Variety: parseFloat(document.getElementById('Variety').value),
        TotalSpending: parseFloat(document.getElementById('TotalSpending').value),
        Recency: parseFloat(document.getElementById('Recency').value)
      };

      const response = await fetch('http://127.0.0.1:5000/predict', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });
      
      const result = await response.json();

      let clusterName = "";
      let clusterClass = "";
      switch(result.cluster) {
        case 0: clusterName = "VIP Customer ðŸ‘‘"; clusterClass = "cluster-0"; break;
        case 1: clusterName = "Regular Buyer ðŸ›’"; clusterClass = "cluster-1"; break;
        case 2: clusterName = "Bargain Hunter ðŸ’°"; clusterClass = "cluster-2"; break;
        case 3: clusterName = "New/Inactive Customer ðŸŒ±"; clusterClass = "cluster-3"; break;
        default: clusterName = "Unknown"; 
      }

      document.getElementById('result').innerHTML = `Predicted Segment: <span class="${clusterClass}">${clusterName}</span>`;
    });
  </script>
</body>
</html>
